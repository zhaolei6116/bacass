nextflow.enable.dsl=2

includeConfig 'config/cluster.config'
includeConfig 'config/software.config'
includeConfig 'config/database.config'

params {
  fastq = null
  reference = null
  threads = 3
  chunk_size = 1000000
  input="sample.xls"
  out_dir = "analysis"
  chunk_size = 1000000
  dep_png_bin_size = 10000
  manual = false               // 是否手动模式
  csv = null                   // CSV 文件路径（批量模式）
  project_id = null            // 单样本模式下的 project_id
  sample_name = null           // 单样本模式下的 sample_name
  fastq_path = null            // 单样本模式下的 fastq_path
  barcode = null               // 单样本模式下的 barcode
  species_name = null          // 单样本模式下的 species_name
  genome_size = null           // 单样本模式下的 genome_size
  sample_id = null
}


// includeConfig "config/${params.genome}.config"

timeline {
  enabled = true
  file = "${params.out_dir}/execution/timeline.html"
  overwrite = true
}
report {
  enabled = true
  file = "${params.out_dir}/execution/report.html"
  overwrite = true
}
trace {
  enabled = true
  file = "${params.out_dir}/execution/trace.txt"
  overwrite = true
}

tower {
    enabled = true
    accessToken = "x"
    endpoint = "http://192.168.100.99:3000/api"
    workspaceId = "2"
}

plugins {
    id 'nf-tower@1.9.2'
}


manifest {
    author = 'Yifan Hu'
    description = "bacteria_assembly: ${params.project_id}"
    mainScript = 'main.nf'
    nextflowVersion = '>=24.04.4'
    version = '1.x.x'
}